<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    {{if and .VersionTag (eq .VersionTag "development")}}
    <script defer src="/static/node_modules/alpinejs/dist/cdn.js"></script>
    {{else}}
    <script defer src="/static/node_modules/alpinejs/dist/cdn.min.js"></script>
    {{end}}
    <script defer src="/static/node_modules/@alpinejs/persist/dist/cdn.min.js"></script>
    <script defer src="/static/node_modules/@alpinejs/focus/dist/cdn.min.js"></script>

    <script src="/static/assets/ts-dist/watch.bundle.js?v={{if .VersionTag}}{{.VersionTag}}{{else}}development{{end}}"></script>
    <title>test</title>
</head>
<body>
<div x-data="watch.chatContext(12845, 1)">
    <button type="button" @click="sortLiveFirst()">Sort Live First</button>
    <button type="button" @click="sortPopularFirst()">Sort Popular First</button>
    <template x-for="m in messages.get(chatSortFn)">
        <div style="border: 1px solid lightgrey; padding: 4px; margin-bottom: 8px;">
            <p x-text="`${m.name}: ${m.message}`"></p>
            <template x-for="(reactionGroup, i) in m.aggregatedReactions">
                <button type="button" :title="reactionGroup.namesPretty"
                        @click="watch.reactToMessage(m.ID, reactionGroup.emojiName)"
                style="margin-right: 4px;">
                    <span x-text="reactionGroup.emoji"></span>
                    <span x-text="reactionGroup.reactions.length"></span>
                </button>
            </template>
            <template x-for="reply in m.replies">
                <p style="margin-left: 16px;" x-text="`> ${reply.name}: ${reply.message}`"></p>
            </template>
        </div>
    </template>
</div>
</body>
</html>